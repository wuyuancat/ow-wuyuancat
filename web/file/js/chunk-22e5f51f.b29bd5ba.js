(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22e5f51f","chunk-1139cda6","chunk-e021d7b4","chunk-2d0bdf09","chunk-2d0df843"],{"136b":function(e,t,n){"use strict";n("bc36")},"242f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{title:"文件上传",width:e.width,visible:e.visible,cancelText:"取消"},on:{ok:e.ok,cancel:e.close}},[n("j-upload",{attrs:{"file-type":e.fileType,value:e.filePath,disabled:e.disabled},on:{change:e.handleChange}})],1)],1)},i=[],o=n("cf74"),s=n("0fea"),l=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},r={name:"JFilePop",components:{JUpload:o["default"]},props:{title:{type:String,default:"",required:!1},position:{type:String,default:"right",required:!1},height:{type:Number,default:200,required:!1},width:{type:Number,default:520,required:!1},popContainer:{type:String,default:"",required:!1},disabled:{type:Boolean,default:!1,required:!1}},data:function(){return{visible:!1,filePath:"",id:"",fileType:"file"}},methods:{handleChange:function(e){this.filePath=e},show:function(e,t,n){this.id=e,this.filePath=t,this.visible=!0,this.fileType="img"===n?"image":"file"},ok:function(){if(!this.filePath)return this.$message.error("未上传任何文件"),!1;var e=this.filePath.split(","),t={name:l(e[0]),url:Object(s["d"])(e[0]),path:this.filePath,status:"done",id:this.id};this.$emit("ok",t),this.visible=!1},close:function(){this.visible=!1}}},u=r,d=n("2877"),c=Object(d["a"])(u,a,i,!1,null,"9168d56a",null);t["default"]=c.exports},"2dab":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-date-picker",{attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},i=[],o=n("c1df"),s=n.n(o),l={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?s()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?s()(e,this.dateFormat):null}},methods:{moment:s.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},r=l,u=n("2877"),d=Object(u["a"])(r,a,i,!1,null,null,null);t["default"]=d.exports},"5f64":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-popover",{attrs:{trigger:"contextmenu",placement:e.position},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("span",[e._v(e._s(e.title))]),n("span",{staticStyle:{float:"right"},attrs:{title:"关闭"}},[n("a-icon",{attrs:{type:"close"},on:{click:function(t){e.visible=!1}}})],1)]),n("a-input",{attrs:{value:e.inputContent},on:{change:e.handleInputChange}},[n("a-icon",{attrs:{slot:"suffix",type:"fullscreen"},on:{click:function(t){return t.stopPropagation(),e.pop.apply(null,arguments)}},slot:"suffix"})],1),n("div",{attrs:{slot:"content"},slot:"content"},[n("textarea",{style:{height:e.height+"px",width:e.width+"px"},domProps:{value:e.inputContent},on:{input:e.handleInputChange}})])],1)},i=[],o={name:"JInputPop",props:{title:{type:String,default:"",required:!1},position:{type:String,default:"right",required:!1},height:{type:Number,default:200,required:!1},width:{type:Number,default:150,required:!1},value:{type:String,required:!1},popContainer:{type:String,default:"",required:!1}},data:function(){return{visible:!1,inputContent:""}},watch:{value:{immediate:!0,handler:function(){this.value&&this.value.length>0&&(this.inputContent=this.value)}}},model:{prop:"value",event:"change"},methods:{handleInputChange:function(e){this.inputContent=e.target.value,this.$emit("change",this.inputContent)},pop:function(){this.visible=!0},getPopupContainer:function(e){return this.popContainer?document.getElementById(this.popContainer):e.parentNode}}},s=o,l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,"74157401",null);t["default"]=r.exports},7550:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-spin",{attrs:{spinning:e.loading}},[n("a-row",{attrs:{type:"flex"}},[n("a-col",[e._t("buttonBefore",null,{target:e.getVM()})],2),n("a-col",[e.actionButton?n("div",{staticClass:"action-button"},[n("a-button",{attrs:{type:"primary",icon:"plus",disabled:e.disabled},on:{click:e.handleClickAdd}},[e._v("新增")]),n("span",{staticClass:"gap"}),e.selectedRowIds.length>0?[n("a-popconfirm",{attrs:{title:"确定要删除这 "+e.selectedRowIds.length+" 项吗?"},on:{confirm:e.handleConfirmDelete}},[n("a-button",{attrs:{type:"primary",icon:"minus",disabled:e.disabled}},[e._v("删除")]),n("span",{staticClass:"gap"})],1),e.showClearSelectButton?[n("a-button",{attrs:{icon:"delete"},on:{click:e.handleClickClearSelection}},[e._v("清空选择")]),n("span",{staticClass:"gap"})]:e._e()]:e._e()],2):e._e()]),n("a-col",[e._t("buttonAfter",null,{target:e.getVM()})],2)],1),e._t("actionButtonAfter",null,{target:e.getVM()}),n("div",{staticClass:"input-table",attrs:{id:e.caseId+"inputTable"}},[n("div",{ref:"thead",staticClass:"thead"},[n("div",{staticClass:"tr",style:{width:this.realTrWidth}},[e.dragSort?n("div",{staticClass:"td td-ds",style:e.style.tdLeftDs},[n("span")]):e._e(),e.rowSelection?n("div",{staticClass:"td td-cb",style:e.style.tdLeft},[n("a-checkbox",{attrs:{checked:e.getSelectAll,indeterminate:e.getSelectIndeterminate},on:{change:e.handleChangeCheckedAll}})],1):e._e(),e.rowNumber?n("div",{staticClass:"td td-num",style:e.style.tdLeft},[n("span",[e._v("#")])]):e._e(),e._l(e.columns,(function(t){return[n("div",{directives:[{name:"show",rawName:"v-show",value:t.type!==e.formTypes.hidden,expression:"col.type !== formTypes.hidden"}],key:t.key,staticClass:"td",style:e.buildTdStyle(t)},[n("span",[e._v(e._s(t.title))])])]}))],2)]),n("div",{ref:"scrollView",staticClass:"scroll-view",style:{"max-height":e.maxHeight+"px"}},[n("div",{staticClass:"tbody",style:e.tbodyStyle,attrs:{id:e.caseId+"tbody"}},[n("div",{staticClass:"tr-expand",style:"height:"+e.getExpandHeight+"px; z-index:"+(e.loading?"11":"9")+";"}),0===e.rows.length?n("div",{staticClass:"tr-nodata"},[n("span",[e._v("暂无数据")])]):e._e(),n("draggable",{attrs:{value:e.rows,handle:".td-ds-icons"},on:{start:e.handleDragMoveStart,end:e.handleDragMoveEnd}},[e._l(e.rows,(function(t,a){return[a>=parseInt(""+(e.scrollTop-e.rowHeight)/e.rowHeight)&&parseInt(""+e.scrollTop/e.rowHeight)+9>a?n("div",{key:t.id,staticClass:"tr",class:-1!==e.selectedRowIds.indexOf(t.id)?"tr-checked":"",style:e.buildTrStyle(a),attrs:{id:e.caseId+"tbody-tr-"+a,"data-idx":a}},[e.dragSort?n("div",{staticClass:"td td-ds",style:e.style.tdLeftDs},[n("a-dropdown",{attrs:{trigger:["click"],getPopupContainer:e.getParentContainer}},[n("div",{staticClass:"td-ds-icons"},[n("a-icon",{attrs:{type:"align-left"}}),n("a-icon",{attrs:{type:"align-right"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"0",attrs:{disabled:0===a},on:{click:function(t){return e._handleRowMoveUp(a)}}},[e._v("向上移")]),n("a-menu-item",{key:"1",attrs:{disabled:a===e.rows.length-1},on:{click:function(t){return e._handleRowMoveDown(a)}}},[e._v("向下移")]),n("a-menu-divider"),n("a-menu-item",{key:"3",on:{click:function(t){return e._handleRowInsertDown(a)}}},[e._v("插入一行")])],1)],1)],1):e._e(),e.rowSelection?n("div",{staticClass:"td td-cb",style:e.style.tdLeft},[e._l([""+t.id],(function(t,a){return[n("a-checkbox",{key:a,attrs:{id:t,checked:-1!==e.selectedRowIds.indexOf(t)},on:{change:e.handleChangeLeftCheckbox}})]}))],2):e._e(),e.rowNumber?n("div",{staticClass:"td td-num",style:e.style.tdLeft},[n("span",[e._v(e._s(a+1))])]):e._e(),e._l(e.columns,(function(i){return n("div",{directives:[{name:"show",rawName:"v-show",value:i.type!==e.formTypes.hidden,expression:"col.type !== formTypes.hidden"}],key:i.key,staticClass:"td",style:e.buildTdStyle(i)},[e._l([""+i.key+t.id],(function(o,s){return[i.type===e.formTypes.input||i.type===e.formTypes.inputNumber?n("label",{key:s},[n("a-tooltip",{attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("input",e._b({attrs:{id:o,"data-input-number":i.type===e.formTypes.inputNumber,placeholder:e.replaceProps(i,i.placeholder)},on:{blur:function(n){e.handleBlurCommono(n.target,a,t,i)},input:function(n){e.handleInputCommono(n.target,a,t,i)},mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},"input",e.buildProps(t,i),!1))])],1):i.type===e.formTypes.checkbox?[n("a-checkbox",e._b({key:s,attrs:{id:o,checked:e.checkboxValues[o]},on:{change:function(n){return e.handleChangeCheckboxCommon(n,t,i)}}},"a-checkbox",e.buildProps(t,i),!1))]:i.type===e.formTypes.select?[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("a-select",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,value:e.selectValues[o],options:i.options,getPopupContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),filterOption:function(t,n){return e.handleSelectFilterOption(t,n,i)},allowClear:""},on:{change:function(n){return e.handleChangeSelectCommon(n,o,t,i)},search:function(n){return e.handleSearchSelect(n,o,t,i)},blur:function(n){return e.handleBlurSearch(n,o,t,i)}}},"a-select",e.buildProps(t,i),!1))],1)])]:i.type===e.formTypes.date||i.type===e.formTypes.datetime?[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("j-date",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,value:e.jdateValues[o],getCalendarContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),"trigger-change":!0,showTime:i.type===e.formTypes.datetime,dateFormat:i.type===e.formTypes.date?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",allowClear:""},on:{change:function(n){return e.handleChangeJDateCommon(n,o,t,i,i.type===e.formTypes.datetime)}}},"j-date",e.buildProps(t,i),!1))],1)])]:i.type===e.formTypes.input_pop?[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("j-input-pop",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,width:300,height:210,"pop-container":e.caseId+"tbody",value:e.jInputPopValues[o],getCalendarContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder)},on:{change:function(n){return e.handleChangeJInputPopCommon(n,o,t,i)}}},"j-input-pop",e.buildProps(t,i),!1))],1)])]:i.type===e.formTypes.upload?n("div",{key:s},[e._l([e.uploadValues[o]||{}],(function(t,a){return null!=e.uploadValues[o]?[n("a-input",{key:a,attrs:{readOnly:!0,value:t.name}},[n("template",{staticStyle:{width:"30px"},slot:"addonBefore"},["uploading"===t.status?n("a-tooltip",{attrs:{title:"上传中("+Math.floor(t.percent)+"%)"}},[n("a-icon",{attrs:{type:"loading"}})],1):"done"===t.status?n("a-tooltip",{attrs:{title:"上传完成"}},[n("a-icon",{staticStyle:{color:"#00DB00"},attrs:{type:"check-circle"}})],1):n("a-tooltip",{attrs:{title:"上传失败"}},[n("a-icon",{staticStyle:{color:"red"},attrs:{type:"exclamation-circle"}})],1)],1),!1!==i.allowDownload||!1!==i.allowRemove?n("template",{staticStyle:{width:"30px"},slot:"addonAfter"},[n("a-dropdown",{attrs:{trigger:["click"],placement:"bottomRight",getPopupContainer:e.getParentContainer}},[n("a-tooltip",{attrs:{title:"操作",getPopupContainer:e.getParentContainer}},["uploading"!==t.status?n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"setting"}}):e._e()],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[!1!==i.allowDownload?n("a-menu-item",{on:{click:function(t){return e.handleClickDownloadFile(o)}}},[n("span",[n("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1)]):e._e(),!1!==i.allowRemove?n("a-menu-item",{on:{click:function(t){return e.handleClickDelFile(o)}}},[n("span",[n("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]):e._e()],1)],1)],1):e._e()],2)]:e._e()})),n("div",{attrs:{hidden:null!=e.uploadValues[o]}},[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("a-upload",e._b({attrs:{name:"file",data:{isup:1},multiple:!1,action:i.action,headers:e.uploadGetHeaders(t,i),showUploadList:!1},on:{change:function(n){return e.handleChangeUpload(n,o,t,i)}}},"a-upload",e.buildProps(t,i),!1),[n("a-button",{attrs:{icon:"upload"}},[e._v(e._s(i.placeholder))])],1)],1)])],1)],2):i.type===e.formTypes.popup?[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("j-popup",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,placeholder:e.replaceProps(i,i.placeholder),value:e.getPopupValue(o),field:i.field||i.key,"org-fields":i.orgFields,"dest-fields":i.destFields,code:i.popupCode,groupId:e.caseId},on:{input:function(n,s){return e.popupCallback(n,s,o,t,i,a)}}},"j-popup",e.buildProps(t,i),!1))],1)])]:i.type===e.formTypes.file?n("div",{key:s},[e._l([e.uploadValues[o]||{}],(function(t,a){return null!=e.uploadValues[o]?[n("div",{key:a,staticStyle:{position:"relative"}},["uploading"===t.status?n("a-tooltip",{attrs:{title:"上传中("+Math.floor(t.percent)+"%)"}},[n("a-icon",{staticStyle:{color:"red"},attrs:{type:"loading"}}),n("span",{staticStyle:{color:"red","margin-left":"5px"}},[e._v(e._s(t.status))])],1):"done"===t.status?n("a-tooltip",{attrs:{title:t.name}},[n("a-icon",{attrs:{type:"paper-clip"}}),n("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.getEllipsisWord(t.name,5)))])],1):n("a-tooltip",{attrs:{title:t.name}},[n("a-icon",{staticStyle:{color:"red"},attrs:{type:"paper-clip"}}),n("span",{staticStyle:{color:"red","margin-left":"5px"}},[e._v(e._s(e.getEllipsisWord(t.name,5)))])],1),[n("a-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:["click"],placement:"bottomRight",getPopupContainer:e.getParentContainer}},[n("a-tooltip",{attrs:{title:"操作",getPopupContainer:e.getParentContainer}},["uploading"!==t.status?n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"setting"}}):e._e()],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[!1!==i.allowDownload?n("a-menu-item",{on:{click:function(t){return e.handleClickDownFileByUrl(o)}}},[n("span",[n("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1)]):e._e(),n("a-menu-item",{on:{click:function(t){return e.handleClickDelFile(o)}}},[n("span",[n("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]),n("a-menu-item",{on:{click:function(t){return e.handleMoreOperation(o)}}},[n("span",[n("a-icon",{attrs:{type:"bars"}}),e._v(" 更多")],1)])],1)],1)]],2)]:e._e()})),n("div",{attrs:{hidden:null!=e.uploadValues[o]}},[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("a-upload",e._b({attrs:{name:"file",data:{isup:1},multiple:!1,action:e.getUploadAction(i.action),headers:e.uploadGetHeaders(t,i),showUploadList:!1},on:{change:function(n){return e.handleChangeUpload(n,o,t,i)}}},"a-upload",e.buildProps(t,i),!1),[n("a-button",{attrs:{icon:"upload"}},[e._v("上传文件")])],1)],1)])],1)],2):i.type===e.formTypes.image?n("div",{key:s},[e._l([e.uploadValues[o]||{}],(function(t,a){return null!=e.uploadValues[o]?[n("div",{key:a,staticStyle:{position:"relative"}},[e.uploadValues[o]&&(e.uploadValues[o]["url"]||e.uploadValues[o]["path"]||e.uploadValues[o]["message"])?e.uploadValues[o]["path"]?[n("img",{staticClass:"j-editable-image",attrs:{src:e.getCellImageView(o),alt:"无图片"},on:{click:function(t){return e.handleMoreOperation(o,"img")}}})]:[n("a-icon",{staticStyle:{color:"red"},attrs:{type:"exclamation-circle"},on:{click:function(t){return e.handleClickShowImageError(o)}}})]:[n("a-icon",{attrs:{type:"loading"}})],n("template",{staticStyle:{width:"30px"},slot:"addonBefore"},["uploading"===t.status?n("a-tooltip",{attrs:{title:"上传中("+Math.floor(t.percent)+"%)"}},[n("a-icon",{attrs:{type:"loading"}})],1):"done"===t.status?n("a-tooltip",{attrs:{title:"上传完成"}},[n("a-icon",{staticStyle:{color:"#00DB00"},attrs:{type:"check-circle"}})],1):n("a-tooltip",{attrs:{title:"上传失败"}},[n("a-icon",{staticStyle:{color:"red"},attrs:{type:"exclamation-circle"}})],1)],1),[n("a-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:["click"],placement:"bottomRight",getPopupContainer:e.getParentContainer}},[n("a-tooltip",{attrs:{title:"操作",getPopupContainer:e.getParentContainer}},["uploading"!==t.status?n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"setting"}}):e._e()],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[!1!==i.allowDownload?n("a-menu-item",{on:{click:function(t){return e.handleClickDownFileByUrl(o)}}},[n("span",[n("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1)]):e._e(),n("a-menu-item",{on:{click:function(t){return e.handleClickDelFile(o)}}},[n("span",[n("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]),n("a-menu-item",{on:{click:function(t){return e.handleMoreOperation(o,"img")}}},[n("span",[n("a-icon",{attrs:{type:"bars"}}),e._v(" 更多")],1)])],1)],1)]],2)]:e._e()})),n("div",{attrs:{hidden:null!=e.uploadValues[o]}},[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("a-upload",e._b({attrs:{name:"file",data:{isup:1},multiple:!1,action:e.getUploadAction(i.action),headers:e.uploadGetHeaders(t,i),showUploadList:!1},on:{change:function(n){return e.handleChangeUpload(n,o,t,i)}}},"a-upload",e.buildProps(t,i),!1),[n("a-button",{attrs:{icon:"upload"}},[e._v("上传图片")])],1)],1)])],1)],2):i.type===e.formTypes.radio?[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("a-radio-group",e._b({key:s,attrs:{id:o,value:e.radioValues[o]},on:{change:function(n){return e.handleRadioChange(n.target.value,o,t,i)}}},"a-radio-group",e.buildProps(t,i),!1),e._l(i.options,(function(t,a){return n("a-radio",{key:a,attrs:{value:t.value}},[e._v(e._s(t.text))])})),1)],1)])]:i.type===e.formTypes.list_multi?[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("a-select",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,mode:"multiple",maxTagCount:1,value:e.multiSelectValues[o],options:i.options,getPopupContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),allowClear:""},on:{change:function(n){return e.handleMultiSelectChange(n,o,t,i)}}},"a-select",e.buildProps(t,i),!1))],1)])]:i.type===e.formTypes.sel_search?[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[n("a-select",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,showSearch:"",optionFilterProp:"children",filterOption:e.filterOption,value:e.searchSelectValues[o],options:i.options,getPopupContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),allowClear:""},on:{change:function(n){return e.handleSearchSelectChange(n,o,t,i)}}},"a-select",e.buildProps(t,i),!1))],1)])]:i.type===e.formTypes.slot?n("div",{key:s},[n("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[n("span",{on:{mouseover:function(){e.handleMouseoverCommono(t,i)},mouseout:function(){e.handleMouseoutCommono(t,i)}}},[e._t(i.slot||i.slotName||i.key,null,{index:a,text:e.slotValues[o],value:e.slotValues[o],column:i,rowId:e.getCleanId(t.id),getValue:function(){return e._getValueForSlot(t.id)},caseId:e.caseId,allValues:e._getAllValuesForSlot(),target:e.getVM(),handleChange:function(n){return e.handleChangeSlotCommon(n,o,t,i)},isNotPass:e.notPassedIds.includes(i.key+t.id)})],2)])],1):n("span",e._b({key:s},"span",e.buildProps(t,i),!1),[e._v(e._s(e.inputValues[a][i.key]))])]}))],2)}))],2):e._e()]}))],2),e.showStatisticsRow?n("div",{staticClass:"tr",style:Object.assign({},e.buildTrStyle(e.rows.length),{height:"32px"})},[e.dragSort?n("div",{staticClass:"td td-ds",style:e.style.tdLeftDs}):e._e(),e.rowSelection?n("div",{staticClass:"td td-cb",style:e.style.tdLeft},[e._v("\n            统计\n          ")]):e._e(),e.rowNumber?n("div",{staticClass:"td td-num",style:e.style.tdLeft},[e.rowSelection?e._e():n("span",[e._v("统计")])]):e._e(),e._l(e.columns,(function(t){return[n("div",{directives:[{name:"show",rawName:"v-show",value:t.type!==e.formTypes.hidden,expression:"col.type !== formTypes.hidden"}],key:t.key,staticClass:"td",style:e.buildTdStyle(t)},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.type===e.formTypes.inputNumber,expression:"col.type === formTypes.inputNumber"}],staticStyle:{padding:"0 5px"}},[e._v(e._s(e.statisticsColumns[t.key]))])])]}))],2):e._e()],1)]),n("j-file-pop",{ref:"filePop",on:{ok:e.handleFileSuccess}})],1)],2)},i=[],o=n("2b0e"),s=n("b76a"),l=n.n(s),r=n("9fb0"),u=n("e2e0"),d=n("ca00"),c=n("2dab"),p=n("89f2"),h=n("0fea"),f=n("5f64"),m=n("242f");function g(e,t){return b(e)||y(e,t)||k(e,t)||v()}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o=[],s=!0,l=!1;try{for(n=n.call(e);!(s=(a=n.next()).done);s=!0)if(o.push(a.value),t&&o.length===t)break}catch(r){l=!0,i=r}finally{try{s||null==n["return"]||n["return"]()}finally{if(l)throw i}}return o}}function b(e){if(Array.isArray(e))return e}function w(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function V(e){return P(e)||S(e)||k(e)||I()}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){if(e){if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function S(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function P(e){if(Array.isArray(e))return x(e)}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=61,A={name:"JEditableTable",components:{JDate:c["default"],Draggable:l.a,JInputPop:f["default"],JFilePop:m["default"]},provide:function(){var e=this;return{parentIsJEditableTable:!0,getDestroyCleanGroupRequest:function(){return e.destroyCleanGroupRequest}}},props:{columns:{type:Array,required:!0},dataSource:{type:Array,required:!0,default:function(){return[]}},actionButton:{type:Boolean,default:!1},rowNumber:{type:Boolean,default:!1},rowSelection:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},maxHeight:{type:Number,default:400},disabledRows:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1},dragSort:{type:Boolean,default:!1},dragSortKey:{type:String,default:"orderNum"}},data:function(){return{isFirst:!0,isJEditableTable:!0,caseIdPrefix:"_jet-",caseId:"_jet-".concat(Object(d["i"])(6),"-"),tempId:"_tid-".concat(Object(d["i"])(6)),el:{inputTable:null,tbody:null},style:{tbody:{left:"0px"},tdLeft:{"min-width":"4%","max-width":"45px"},tdLeftDs:{"min-width":"30px","max-width":"35px"}},formTypes:u["a"],rows:[],rowHeight:j,scrollTop:0,selectValues:{},checkboxValues:{},jdateValues:{},jInputPopValues:{},slotValues:{},uploadValues:{},popupValues:{},radioValues:{},metaCheckboxValues:{},multiSelectValues:{},searchSelectValues:{},selectedRowIds:[],deleteIds:[],tooltips:{},notPassedIds:[],dragging:!1,hasStatisticsColumn:!1,statisticsColumns:{},destroyCleanGroupRequest:!1}},created:function(){this.inputValues=[],this.visibleTrEls=[],this.disabledRowIds=this.disabledRowIds||[]},computed:{getExpandHeight:function(){var e=this.rows.length*this.rowHeight;return this.showStatisticsRow&&(e+=34),e},showStatisticsRow:function(){return this.hasStatisticsColumn&&this.rows.length>0},getSelectIndeterminate:function(){return this.selectedRowIds.length>0&&this.selectedRowIds.length<this.rows.length},getSelectAll:function(){return this.selectedRowIds.length===this.rows.length&&this.rows.length>0},tbodyStyle:function(){var e=Object.assign({},this.style.tbody);return e["width"]=this.realTrWidth,e},showClearSelectButton:function(){var e=0;for(var t in this.disabledRows)this.disabledRows.hasOwnProperty(t)&&e++;return e>0},accessToken:function(){return o["default"].ls.get(r["a"])},realTrWidth:function(){var e=" + ",t="calc(";return this.columns.forEach((function(n,a){var i=n.type,o=n.width;i!==u["a"].hidden&&(t+="number"===typeof o?o+"px":"string"===typeof o?o:"120px",t+=e)})),t.endsWith(e)&&(t=t.substring(0,t.length-e.length)),t+=")",t}},watch:{rows:{immediate:!0,handler:function(e,t){}},dataSource:{immediate:!0,handler:function(e){var t=this;this.getElementPromise("tbody").then((function(){t.initialize(),t._pushByDataSource(e)}))}},columns:{immediate:!0,handler:function(e){var t=this;this.getElementPromise("tbody").then((function(){e.forEach((function(e){e.type!==u["a"].select&&e.type!==u["a"].list_multi&&e.type!==u["a"].sel_search||(e.options instanceof Array&&(e.options=e.options.map((function(e){return e?_(_({},e),{},{text:e.text||e.title,title:e.text||e.title}):{}}))),e.dictCode&&t._loadDictConcatToOptions(e))}))}))}},selectedRowIds:function(e){var t=this;this.$emit("selectRowChange",Object(d["b"])(e).map((function(e){return t.getCleanId(e)})))}},mounted:function(){var e=this;this.getElement("inputTable").onscroll=function(t){e.syncScrollBar(t.target.scrollLeft)},this.getElement("tbody").onscroll=function(e){};var t=this.$refs,n=t.thead,a=t.scrollView;a.onscroll=function(t){n.scrollLeft=t.target.scrollLeft,e.recalcTrHiddenItem(t.target.scrollTop)}},methods:{getElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.el[e]||(this.el[e]=document.getElementById((t?"":this.caseId)+e)),this.el[e]},getElementPromise:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(a){var i=setInterval((function(){var o=t.getElement(e,n);o&&(clearInterval(i),a(o))}),10)}))},initialize:function(){var e=this;this.visibleTrEls=[],this.isFirst?this.isFirst=!1:(this.inputValues=[],this.rows=[],this.deleteIds=[],this.selectValues={},this.checkboxValues={},this.jdateValues={},this.jInputPopValues={},this.slotValues={},this.selectedRowIds=[],this.tooltips={},this.notPassedIds=[],this.uploadValues=[],this.popupValues=[],this.radioValues=[],this.multiSelectValues=[],this.searchSelectValues=[],this.scrollTop=0,this.$nextTick((function(){e.getElement("tbody").scrollTop=0})))},syncScrollBar:function(e){},resetScrollTop:function(e){var t=this.$refs.scrollView;t.scrollTop=null!=e&&"number"===typeof e?e:this.scrollTop},recalcTrHiddenItem:function(e){var t=this,n=e-this.scrollTop;n<0&&(n=this.scrollTop-e),n>=.3*this.rowHeight&&(this.scrollTop=e,this.$nextTick((function(){t.updateFormValues()})))},generateId:function(e){e instanceof Array||(e=this.rows||[]);var t=(new Date).getTime();return"".concat(this.caseId).concat(t).concat(e.length).concat(Object(d["h"])(6)).concat(this.tempId)},push:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return this._pushByDataSource([e],[a],t,n,i)},_pushByDataSource:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i instanceof Array||(i=V(this.rows)||[]);var s=_({},this.checkboxValues),l=_({},this.selectValues),r=_({},this.jdateValues),d=_({},this.jInputPopValues),c=_({},this.slotValues),p=_({},this.uploadValues),h=_({},this.popupValues),f=_({},this.radioValues),m=_({},this.multiSelectValues),g=_({},this.searchSelectValues),v=this.disabledRowIds||[];return e.forEach((function(e,a){var y=e.id;null==y||""===y?y=t.generateId(i):t.hasCaseId(y)||(y=t.caseId+y);var b={id:y},w={id:y},C=!1;t.columns.forEach((function(n){var a=n.key+w.id,i=(null==e[n.key]?"":e[n.key]).toString(),y=null;o&&(y=n.defaultValue||(0===n.defaultValue?0:""),y instanceof Array&&(y=y.join(",")),i="number"===typeof i||i?i:y);var V=null==i||""===i;if(n.type===u["a"].inputNumber)!0===n.isOrder?w[n.key]=t.getInputNumberMaxValue(n)+1:w[n.key]=i,n.statistics&&(t.hasStatisticsColumn=!0,t.statisticsColumns[n.key]||t.$set(t.statisticsColumns,n.key,0));else if(n.type===u["a"].checkbox)if(n.customValue instanceof Array){var I=(n.customValue[0]||"").toString();V&&o&&(i=n.defaultChecked?I:i),s[a]=i===I}else s[a]=V&&o?!!n.defaultChecked:i;else if(n.type===u["a"].select)V?l[a]=void 0:("string"===typeof i&&"multiple"===(n.props||{})["mode"]&&(i=i.split(",")),l[a]=i);else if(n.type===u["a"].date||n.type===u["a"].datetime)r[a]=i;else if(n.type===u["a"].slot)c[a]=i;else if(n.type===u["a"].popup)h[a]=i;else if(n.type===u["a"].input_pop)d[a]=i;else if(n.type===u["a"].radio)f[a]=i;else if(n.type===u["a"].sel_search)g[a]=i;else if(n.type===u["a"].list_multi)"string"===typeof i&&i.length>0?m[a]=i.split(","):m[a]=[];else if(n.type===u["a"].upload||n.type===u["a"].file||n.type===u["a"].image){if(i){var k="";if(i.indexOf(",")>0){var S=i.split(",")[0];k=S.substring(S.lastIndexOf("/")+1)}else k=i.substring(i.lastIndexOf("/")+1);p[a]={name:k,status:"done",path:i}}}else w[n.key]=i;for(var P in t.disabledRows)if(t.disabledRows.hasOwnProperty(P)&&e.hasOwnProperty(P)&&!0!==C){var x=t.disabledRows[P];C=x instanceof Array?x.includes(e[P]):x===e[P],C&&v.push(b.id)}}));var V=!1;if(n instanceof Array){var I=n[a];"number"===typeof I&&(V=!0,i.splice(I,0,b),t.inputValues.splice(I,0,w))}V||(i.push(b),t.inputValues.push(w))})),this.dragSort&&this.inputValues.forEach((function(e,n){e[t.dragSortKey]=n+1})),this.disabledRowIds=v,this.checkboxValues=s,this.selectValues=l,this.jdateValues=r,this.jInputPopValues=d,this.slotValues=c,this.uploadValues=p,this.popupValues=h,this.radioValues=f,this.multiSelectValues=m,this.searchSelectValues=g,this.recalcAllStatisticsColumns(),a&&(this.rows=i,this.$nextTick((function(){t.updateFormValues()}))),i},getInputNumberMaxValue:function(e){var t=0;return this.inputValues.forEach((function(n,a){var i,o=n[e.key];try{i=parseInt(o)}catch(s){i=0}t=0===a||i>t?i:t})),t},add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t<1)){for(var a,i=this.rows,o=0;o<t;o++)i=this.push({},!1,i),a=i[i.length-1];this.rows=i,this.$nextTick((function(){e.updateFormValues()})),this.$emit("added",{row:function(){var t=Object.assign({},a);return t.id=e.getCleanId(t.id),t}(),target:this});var s=this.getElement("tbody"),l=s.offsetHeight,r=s.scrollTop+l;(!1!==n||s.scrollHeight-r<=10)&&this.$nextTick((function(){s.scrollTop=s.scrollHeight}))}},insert:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e||!(n<1)){for(var a=this.rows,i=[],o=0;o<n;o++){var s={id:this.generateId(a)};a=this.push(s,!1,a,e),i.push(s)}this.rows=a,this.$nextTick((function(){t.recalcSortNumber(),t.forceUpdateFormValues()})),this.$emit("inserted",{rows:i.map((function(e){var n=Object(d["b"])(e);return n.id=t.getCleanId(n.id),n})),num:n,insertIndex:e,target:this})}},removeSelectedRows:function(){this.removeRows(this.selectedRowIds),this.selectedRowIds=[]},removeRows:function(e){var t=this,n=e;if(!(e instanceof Array)){if("string"!==typeof e)throw"JEditableTable.removeRows() 函数需要的参数可以是string或Array类型，但提供的却是".concat(C(e));n=[e]}var a=Object(d["b"])(this.rows);return n.forEach((function(e){e=t.getCleanId(e);var n=function(n){for(var a=0;a<n.length;a++){var i=t.getCleanId(n[a].id);if(i===e)return n.splice(a,1),!0}};if(n(a)){n(t.inputValues);var i=t.getCleanId(e);t.deleteIds.push(i)}})),this.rows=a,this.$emit("deleted",this.getDeleteIds(),this),this.$nextTick((function(){t.updateFormValues(),t.recalcAllStatisticsColumns()})),!0},getValuesAsync:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a=t.validate,i=t.rowIds,o=t.deleteTempId;"boolean"!==typeof a&&(a=!0),i instanceof Array||(i=null),"boolean"!==typeof o&&(o=!1);var s,l=0,r=0,c=Object(d["b"])(this.inputValues),p=Object.assign({},this.tooltips),h=Object(d["b"])(this.notPassedIds),f=[],m=w(c);try{var g=function(){var t=s.value,n=!1;if(null==i)n=!0;else{var c,m=w(i);try{for(m.s();!(c=m.n()).done;){var g=c.value;if(e.getCleanId(g)===e.getCleanId(t.id)){n=!0;break}}}catch(v){m.e(v)}finally{m.f()}}if(!n)return"continue";e.columns.forEach((function(n){var i=n.key+t.id;if(n.type===u["a"].checkbox){var o=e.checkboxValues[i];n.customValue instanceof Array?t[n.key]=o?n.customValue[0]:n.customValue[1]:t[n.key]=o}else if(n.type===u["a"].select){var s=e.selectValues[i];t[n.key]=s instanceof Array?Object(d["b"])(s):s}else if(n.type===u["a"].date||n.type===u["a"].datetime)t[n.key]=e.jdateValues[i];else if(n.type===u["a"].input_pop)t[n.key]=e.jInputPopValues[i];else if(n.type===u["a"].upload)t[n.key]=Object(d["b"])(e.uploadValues[i]||null);else if(n.type===u["a"].image||n.type===u["a"].file){var c=Object(d["b"])(e.uploadValues[i]||null);c&&(t[n.key]=c["path"]||null)}else n.type===u["a"].popup?t[n.key]||(t[n.key]=e.popupValues[i]||null):n.type===u["a"].radio?t[n.key]=e.radioValues[i]:n.type===u["a"].sel_search?t[n.key]=e.searchSelectValues[i]:n.type===u["a"].list_multi?e.multiSelectValues[i]&&0!==e.multiSelectValues[i].length?t[n.key]=e.multiSelectValues[i].join(","):t[n.key]="":n.type===u["a"].slot&&(t[n.key]=e.slotValues[i]);if(!0===a){var f=function(e){p[i]=e[0],!1===p[i].passed&&r++,p[i].visible=!1,h=e[1]};l++;var m=e.validateOneInputAsync(t[n.key],t,n,h,!1,"getValues",(function(e){f(e),l--}));f(m)}})),o&&e.isTempId(t.id)?delete t.id:t.id=e.getCleanId(t.id),f.push(t)};for(m.s();!(s=m.n()).done;)g()}catch(y){m.e(y)}finally{m.f()}!0===a&&(this.tooltips=p,this.notPassedIds=h);var v=setInterval((function(){0===l&&(clearInterval(v),"function"===typeof n&&n({error:r,values:f}))}),10);return{error:r,values:f}},getValuesSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getValuesAsync(e)},getValues:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;this.getValuesAsync({validate:t,rowIds:n},(function(t){var n=t.error,a=t.values;"function"===typeof e&&e(n,a)}))},getValuesPromise:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return new Promise((function(i,o){e.getValuesAsync({validate:t,rowIds:n,deleteTempId:a},(function(e){var t=e.error,n=e.values;0===t?i(n):o(u["b"])}))}))},getDeleteIds:function(){return Object(d["b"])(this.deleteIds)},getAll:function(e,t){var n=this;return new Promise((function(a,i){var o=n.getDeleteIds();n.getValuesPromise(e,null,t).then((function(e){a({values:e,deleteIds:o})})).catch((function(e){i(e)}))}))},getAllSync:function(e,t,n){var a=this.getValuesSync({validate:e,rowIds:t,deleteTempId:n});return a.deleteIds=this.getDeleteIds(),a},_getValueForSlot:function(e){return this.getValuesSync({rowIds:[e]}).values[0]},_getAllValuesForSlot:function(){return Object(d["b"])({inputValues:this.inputValues,selectValues:this.selectValues,checkboxValues:this.checkboxValues,jdateValues:this.jdateValues,jInputPopValues:this.jInputPopValues,slotValues:this.slotValues,uploadValues:this.uploadValues,popupValues:this.popupValues,radioValues:this.radioValues,multiSelectValues:this.multiSelectValues,searchSelectValues:this.searchSelectValues})},setValues:function(e){var t=this;e.forEach((function(e){var n=e.rowKey,a=e.values;n=t.getCleanId(n);var i=function(e){if(a.hasOwnProperty(e)){var i=a[e],o=!1;t.inputValues.forEach((function(a){n===t.getCleanId(a.id)&&a.hasOwnProperty(e)&&(o=!0,a[e]=i)}));var s="".concat(e).concat(t.caseId).concat(n);o||(o=0===i||i?t.setOneValue(t.selectValues,s,i):t.setOneValue(t.selectValues,s,void 0)),o||(o=t.setOneValue(t.checkboxValues,s,i)),o||(o=t.setOneValue(t.jdateValues,s,i)),o||(o=t.setOneValue(t.jInputPopValues,s,i)),o||(o=t.setOneValue(t.slotValues,s,i)),o||(o=t.setOneValue(t.uploadValues,s,i)),o||(o=t.setOneValue(t.popupValues,s,i)),o||(o=t.setOneValue(t.radioValues,s,i)),o||(o=t.setOneValue(t.multiSelectValues,s,i)),o||(o=t.setOneValue(t.searchSelectValues,s,i))}};for(var o in a)i(o)})),this.forceUpdateFormValues()},setOneValue:function(e,t,n){var a=this.valuesHasOwnProperty(e,t);return!!a&&(this.$set(e,a,n),!0)},valuesHasOwnProperty:function(e,t){var n=t;return e.hasOwnProperty(n)?n:e.hasOwnProperty(n+this.tempId)?n+this.tempId:null},validateOneInputAsync:function(e,t,n,a){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"input",l=arguments.length>6?arguments[6]:void 0,r=Object.assign({},this.tooltips),d=n.key+t.id;r[d]=r[d]?r[d]:{};var c=this.validateValue(n,e),p=g(c,2),h=p[0],f=p[1],m=function(e){var t=g(e,2),s=t[0],c=t[1];if(null!=s){r[d].visible=!s,r[d].passed=s;var p=a.indexOf(d),h=null,f=null;s?-1!==p&&a.splice(p,1):(r[d].title=i.replaceProps(n,c),h="red",f="0 0 0 2px rgba(255, 0, 0, 0.2)",-1===p&&a.push(d));var m=document.getElementById(d);null!=m&&(n.type===u["a"].select&&(m=m.getElementsByClassName("ant-select-selection")[0]),n.type!==u["a"].date&&n.type!==u["a"].datetime||(m=m.getElementsByTagName("input")[0]),n.type!==u["a"].upload&&n.type!==u["a"].file&&n.type!==u["a"].image||(m=m.getElementsByClassName("ant-upload")[0].getElementsByClassName("ant-btn")[0]),m.style.borderColor=h,m.style.boxShadow=f,"SPAN"===m.tagName&&(m.style.display="block"))}o&&(i.tooltips=r,i.notPassedIds=a),"function"===typeof l&&l([r[d],a])};if("function"===typeof h){var v=!1;h(s,e,{id:this.getCleanId(t.id)},_({},n),(function(e,t){v||(v=!0,"string"===typeof t&&(f=t),m(null==e?[null,f]:[!!e,f]))}),this)}else m([h,f]);return[r[d],a]},validateOneInput:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"input";return this.validateOneInputAsync(e,t,n,a,i,o)},validateValue:function(e,t){var n=e.validateRules,a=!0,i="";if(n instanceof Array){var o,s=w(n);try{for(s.s();!(o=s.n()).done;){var l=o.value,r=null==t||""===t;if(!0===l.required&&r)a=!1;else if(!0===l.unique||"only"===l.pattern){var u,d=this.getValuesSync({validate:!1}),c=d.values,p=0,h=w(c);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(f[e.key]===t&&++p>=2){a=!1;break}}}catch(C){h.e(C)}finally{h.f()}}else if(l.pattern&&!r){for(var m=[{title:"6到16位数字",value:"n6-16",pattern:/^\d{6,18}$/},{title:"6到16位任意字符",value:"*6-16",pattern:/^.{6,16}$/},{title:"6到18位字母",value:"s6-18",pattern:/^[a-z|A-Z]{6,18}$/},{title:"网址",value:"url",pattern:/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/},{title:"电子邮件",value:"e",pattern:/^([\w]+\.*)([\w]+)@[\w]+\.\w{3}(\.\w{2}|)$/},{title:"手机号码",value:"m",pattern:/^1[3456789]\d{9}$/},{title:"邮政编码",value:"p",pattern:/^[1-9]\d{5}$/},{title:"字母",value:"s",pattern:/^[A-Z|a-z]+$/},{title:"数字",value:"n",pattern:/^-?\d+(\.?\d+|\d?)$/},{title:"整数",value:"z",pattern:/^-?\d+$/},{title:"非空",value:"*",pattern:/^.+$/},{title:"金额",value:"money",pattern:/^(([1-9][0-9]*)|([0]\.\d{0,2}|[1-9][0-9]*\.\d{0,2}))$/}],g=!1,v=0,y=m;v<y.length;v++){var b=y[v];if(l.pattern===b.value&&b.pattern){a=new RegExp(b.pattern).test(t),g=!0;break}}g||(a=new RegExp(l.pattern).test(t))}else if("function"===typeof l.handler)return[l.handler,l.message];if(!a){i=l.message;break}}}catch(C){s.e(C)}finally{s.f()}}return[a,i]},updateFormValues:function(){var e,t=this,n=this.getElement("tbody").getElementsByClassName("tr"),a=[],i=w(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;a.push(o)}}catch(f){i.e(f)}finally{i.f()}var s=a;if(this.visibleTrEls.length>0){s=[];var l,r=w(a);try{for(r.s();!(l=r.n()).done;){var u,d=l.value,c=!0,p=w(this.visibleTrEls);try{for(p.s();!(u=p.n()).done;){var h=u.value;if(h.id===d.id){c=!1;break}}}catch(f){p.e(f)}finally{p.f()}c&&s.push(d)}}catch(f){r.e(f)}finally{r.f()}}this.visibleTrEls=a,s.forEach((function(e){var n=e.dataset.idx,a=t.inputValues[n];for(var i in a)if(a.hasOwnProperty(i)){var o="".concat(i).concat(a.id),s=document.getElementById(o);s&&(s.value=a[i])}}))},forceUpdateFormValues:function(){this.visibleTrEls=[],this.updateFormValues()},recalcAllStatisticsColumns:function(){var e=this;this.hasStatisticsColumn&&Object.keys(this.statisticsColumns).forEach((function(t){return e.recalcOneStatisticsColumn(t)}))},recalcOneStatisticsColumn:function(e){if(this.hasStatisticsColumn&&this.statisticsColumns.hasOwnProperty(e)){var t=0;this.inputValues.forEach((function(n){var a=n[e];if(a&&"-"!==t)try{t+=Number.parseInt(a)}catch(i){t="-"}})),this.statisticsColumns[e]=t}},getStatisticsValue:function(e){return this.hasStatisticsColumn&&this.statisticsColumns.hasOwnProperty(e)?this.statisticsColumns[e]:null},handleChangeCheckedAll:function(){var e=this,t=[];this.getSelectAll||this.rows.forEach((function(n){-1===(e.disabledRowIds||[]).indexOf(n.id)&&t.push(n.id)})),this.selectedRowIds=t},handleChangeLeftCheckbox:function(e){var t=e.target.id;if(-1===(this.disabledRowIds||[]).indexOf(t)){var n=this.selectedRowIds.indexOf(t);-1!==n?this.selectedRowIds.splice(n,1):this.selectedRowIds.push(t)}},handleClickAdd:function(){this.add()},handleConfirmDelete:function(){this.removeSelectedRows()},handleClickClearSelection:function(){this.clearSelection()},clearSelection:function(){this.selectedRowIds=[]},handleSelectFilterOption:function(e,t,n){return!0!==n.allowSearch&&!0!==n.allowInput||t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleSearchSelect:function(e,t,n,a){if(!0!==a.allowSearch&&!0===a.allowInput){var i,o=!1,s=w(a.options);try{for(s.s();!(i=s.n()).done;){var l=i.value;if(l.value.toLocaleString()===e.toLocaleString()){o=!0;break}}}catch(r){s.e(r)}finally{s.f()}!o&&e&&a.options.push({title:e,value:e,searchAdd:!0})}},handleBlurSearch:function(e,t,n,a){if(!0===a.allowInput&&"string"===typeof e){var i=[];a.options.forEach((function(t,n){t.value.toLocaleString()===e.toLocaleString()?delete t.searchAdd:!0===t.searchAdd&&i.push(n)}));var o,s=w(i.reverse());try{for(s.s();!(o=s.n()).done;){var l=o.value;a.options.splice(l,1)}}catch(r){s.e(r)}finally{s.f()}}this.validateOneInput(e,n,a,this.notPassedIds,!0,"blur")},emitDragged:function(e,t){this.$emit("dragged",{oldIndex:e,newIndex:t,target:this})},handleDragMoveStart:function(e){this.dragging=!0,this.$refs.scrollView.style.overflow="hidden"},handleDragMoveEnd:function(e){this.dragging=!1,this.$refs.scrollView.style.overflow="auto";var t=e.oldIndex,n=e.newIndex,a=e.item.dataset.idx,i=Number.parseInt(a)-t;t+=i,n+=i,this.rowResort(t,n),this.emitDragged(t,n)},rowResort:function(e,t){var n=function(n){var a=n[e];n.splice(e,1),n.splice(t,0,a)};n(this.rows),n(this.inputValues),this.recalcSortNumber(),this.forceUpdateFormValues()},recalcSortNumber:function(){var e=this;this.dragSort&&this.inputValues.forEach((function(t,n){return t[e.dragSortKey]=n+1}))},_handleRowMoveUp:function(e){if(e>0){var t=e-1;this.rowResort(e,t),this.emitDragged(e,t)}},_handleRowMoveDown:function(e){if(e<this.rows.length-1){var t=e+1;this.rowResort(e,t),this.emitDragged(e,t)}},_handleRowInsertDown:function(e){var t=e+1;this.insert(t)},handleMouseoverCommono:function(e,t){var n=t.key+e.id;-1!==this.notPassedIds.indexOf(n)&&this.showOrHideTooltip(n,!0,!0)},handleMouseoutCommono:function(e,t){var n=t.key+e.id;this.showOrHideTooltip(n,!1)},handleInputCommono:function(e,t,n,a){var i=this.inputValues[t][a.key]||"",o=e.value,s=e.dataset,l=e.selectionStart,r=u["a"].input,d=!0;"true"==="".concat(s.inputNumber)&&(r=u["a"].inputNumber,/^-?\d+\.?\d*$/.test(o)||""===o||"-"===o||(d=!1,o=i,e.value=o,"number"===typeof l&&(e.selectionStart=l-1,e.selectionEnd=l-1))),this.inputValues[t][a.key]=o,this.validateOneInput(o,n,a,this.notPassedIds,!0,"input"),r===u["a"].inputNumber&&this.recalcOneStatisticsColumn(a.key),d&&this.elemValueChange(r,n,a,o)},handleChangeSlotCommon:function(e,t,n,a){this.slotValues=this.bindValuesChange(e,t,"slotValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].slot,n,a,e)},handleBlurCommono:function(e,t,n,a){var i=e.value,o=e.dataset;o&&"true"==="".concat(o.inputNumber)&&(i=/^-?\d+\.?\d*$/.test(i)?Number.parseFloat(i):"",e.value=i),this.validateOneInput(i,n,a,this.notPassedIds,!0,"blur")},handleChangeCheckboxCommon:function(e,t,n){var a=e.target,i=a.id,o=a.checked;this.checkboxValues=this.bindValuesChange(o,i,"checkboxValues"),this.elemValueChange(u["a"].checkbox,t,n,o)},handleChangeSelectCommon:function(e,t,n,a){this.selectValues=this.bindValuesChange(e,t,"selectValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].select,n,a,e)},handleChangeJDateCommon:function(e,t,n,a,i){this.jdateValues=this.bindValuesChange(e,t,"jdateValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),i?this.elemValueChange(u["a"].datetime,n,a,e):this.elemValueChange(u["a"].date,n,a,e)},handleChangeJInputPopCommon:function(e,t,n,a){this.jInputPopValues=this.bindValuesChange(e,t,"jInputPopValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].input_pop,n,a,e)},handleChangeUpload:function(e,t,n,a){var i=e.file,o={name:i.name,type:i.type,size:i.size,status:i.status,percent:i.percent};a.responseName&&i.response&&(o["responseName"]=i.response[a.responseName]),"done"===i.status?o["path"]=i.response[a.responseName]:"error"===i.status&&(o["message"]=i.response.message||"未知错误"),this.uploadValues=this.bindValuesChange(o,t,"uploadValues")},handleMoreOperation:function(e,t){var n="";this.uploadValues&&this.uploadValues[e]&&(n=this.uploadValues[e].path),this.$refs.filePop.show(e,n,t)},handleFileSuccess:function(e){e.id&&(this.uploadValues=this.bindValuesChange(e,e.id,"uploadValues"))},bindValuesChange:function(e,t,n){return this.$set(this[n],t,e),this[n]},showOrHideTooltip:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.tooltips[e]||n){var a=this.tooltips[e]||{};a.visible!==t&&(a.visible=t,this.$set(this.tooltips,e,a))}},elemValueChange:function(e,t,n,a){var i=Object.assign({},n),o=Object.assign({},t);o.id=this.getCleanId(o.id);var s=this.getValuesSync({validate:!1,rowIds:[o.id]}),l=s.values;l.length>0&&Object.assign(o,l[0]),this.$emit("valueChange",{type:e,row:o,column:i,value:a,target:this})},getCleanId:function(e){return e=this.removeCaseId(e),e=this.removeTempId(e),e},hasCaseId:function(e){return e&&e.startsWith(this.caseId)},removeCaseId:function(e){return this.hasCaseId(e)?e.substring(this.caseId.length,e.length):e},isTempId:function(e){return(e||"").endsWith(this.tempId)},removeTempId:function(e){return this.isTempId(e)?e.substring(0,e.length-this.tempId.length):e},handleClickDelFile:function(e){this.uploadValues[e]=null},handleClickDownloadFile:function(e){var t=this.uploadValues[e]||{},n=t.path;if(n){var a=Object(h["d"])(n);window.open(a)}},handleClickDownFileByUrl:function(e){var t=this.uploadValues[e]||{},n=t.url,a=t.path;n&&0!==n.length||a&&a.length>0&&(n=Object(h["d"])(a.split(",")[0])),n&&window.open(n)},handleClickShowImageError:function(e){var t=this.uploadValues[e]||null;t&&t["message"]&&this.$error({title:"上传出错",content:"错误信息："+t["message"],maskClosable:!0})},_loadDictConcatToOptions:function(e){Object(p["b"])(e.dictCode).then((function(t){if(t.success){var n=e.options||[];t.result.forEach((function(e){var t,a=w(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.value===e.value)return}}catch(o){a.e(o)}finally{a.f()}n.push(e)})),e.options=n}}))},log:function(){this.$attrs.logger},getVM:function(){return this},getParentContainer:function(e){var t=this,n=function(){if(t.$el&&8!==t.$el.nodeType)return t.$el;var n=document.getElementById(t.caseId+"inputTable");return null!=n?n:e.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode}(),a=function e(t){var n=null;if(t["currentStyle"]?n=t["currentStyle"]["overflow"]:window.getComputedStyle&&(n=window.getComputedStyle(t)["overflow"]),null!=n){if("hidden"===n){var a=e(t.parentNode);return null!=a?a:t.parentNode}return t.parentNode&&"body"!==t.parentNode.tagName.toLocaleLowerCase()?e(t.parentNode):null}return t},i=a(n);return null!=i?i:n},replaceProps:function(e,t){return t&&"string"===typeof t&&(t=t.replace(/\${title}/g,e.title),t=t.replace(/\${key}/g,e.key),t=t.replace(/\${defaultValue}/g,e.defaultValue)),t},buildTrStyle:function(e){return{top:"".concat(j*e,"px")}},buildTdStyle:function(e){var t=function(e){return e.type===u["a"].hidden||"0px"===e.width||"0"===e.width||0===e.width},n={};e.width?n["width"]=e.width:this.columns?n["width"]="".concat(92/this.columns.filter((function(e){return!t(e)})).length,"%"):n["width"]="120px";var a=e.type===u["a"].checkbox;return a&&(n["align-items"]="center",n["text-align"]="center",n["padding-left"]="0",n["padding-right"]="0"),t(e)&&(n["padding-left"]="0",n["padding-right"]="0"),n},buildProps:function(e,t){var n={};if("object"===C(t.props))for(var a in t.props)t.props.hasOwnProperty(a)&&(n[a]=this.replaceProps(t,t.props[a]));return t.type!==u["a"].select||!0!==t.allowInput&&!0!==t.allowSearch||(n["showSearch"]=!0),n["disabled"]="boolean"===typeof t["disabled"]?t["disabled"]:n["disabled"],!0!==n["disabled"]&&(n["disabled"]=-1!==(this.disabledRowIds||[]).indexOf(e.id)),!0===this.disabled&&(n["disabled"]=!0),n},uploadGetHeaders:function(e,t){var n={};return!0===t.token&&(n["X-Access-Token"]=this.accessToken),n},getUploadAction:function(e){return e||window._CONFIG["domianURL"]+"/sys/common/upload"},getCellImageView:function(e){var t=this.uploadValues[e]||null;if(t){if(t["url"])return t["url"];if(t["path"]){var n=t["path"].split(",")[0];return Object(h["d"])(n)}}return""},popupCallback:function(e,t,n,a,i,o){var s=this;this.popupValues[n]=e,t&&Object.keys(t).map((function(e){s.columns.map((function(a){if(a.key===e){var i=n.substring(n.indexOf(s.caseIdPrefix));"date"===a.type?s.handleChangeJDateCommon(t[e],e+i,{id:i},a,!1):"datetime"===a.type?s.handleChangeJDateCommon(t[e],e+i,{id:i},a,!0):s.inputValues[o][e]=t[e]}}))})),this.validateOneInput(e,a,i,this.notPassedIds,!0,"change"),this.elemValueChange("input",a,i,e),this.$nextTick((function(){s.forceUpdateFormValues()}))},getPopupValue:function(e){return this.popupValues[e]},handleRadioChange:function(e,t,n,a){this.radioValues=this.bindValuesChange(e,t,"radioValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].radio,n,a,e)},handleMultiSelectChange:function(e,t,n,a){this.multiSelectValues=this.bindValuesChange(e,t,"multiSelectValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].list_multi,n,a,e)},handleSearchSelectChange:function(e,t,n,a){this.searchSelectValues=this.bindValuesChange(e,t,"searchSelectValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].sel_search,n,a,e)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getEllipsisWord:function(e,t){return e&&0!=e.length?e.length>t?e.substr(0,t):e:""}},beforeDestroy:function(){this.destroyCleanGroupRequest=!0}},D=A,N=(n("136b"),n("2877")),E=Object(N["a"])(D,a,i,!1,null,"139b423a",null);t["default"]=E.exports},"7ab5":function(e,t,n){},"89f2":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return d}));var a=n("a34a"),i=n.n(a),o=n("4ec3");n("0fea");function s(e,t,n,a,i,o,s){try{var l=e[o](s),r=l.value}catch(u){return void n(u)}l.done?t(r):Promise.resolve(r).then(a,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function l(e){s(o,a,i,l,r,"next",e)}function r(e){s(o,a,i,l,r,"throw",e)}l(void 0)}))}}function r(e){return u.apply(this,arguments)}function u(){return u=l(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","字典Code不能为空!");case 2:if(!Object(o["w"])(t)){e.next=7;break}return n={},n.result=Object(o["w"])(t),n.success=!0,e.abrupt("return",n);case 7:return e.next=9,Object(o["g"])(t);case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function d(e,t){if(null!=t&&0!=t.length){if(!e)return"字典Code不能为空!";if(Object(o["w"])(e)){var n=Object(o["w"])(e).filter((function(e){return e["value"]==t}));if(n&&n.length>0)return n[0]["text"]}}}},bc36:function(e,t,n){},cf74:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"relative"},attrs:{id:e.containerId}},[n("div",{staticClass:"movety-container",staticStyle:{padding:"0 8px",position:"absolute","z-index":"91",height:"32px",width:"104px","text-align":"center"},style:{top:e.top+"px",left:e.left+"px",display:e.moveDisplay}},[n("div",{class:e.showMoverTask?"uploadty-mover-mask":"movety-opt",staticStyle:{"margin-top":"12px"},attrs:{id:e.containerId+"-mover"}},[n("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveLast}},[n("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-left"}})],1),n("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveNext}},[n("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-right"}})],1)])]),n("a-upload",{class:{"uploadty-disabled":e.disabled},attrs:{name:"file",multiple:e.multiple,action:e.getUploadAction(),headers:e.headers,data:e.getUploadData,fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,returnUrl:e.returnUrl,listType:e.complistType},on:{change:e.handleChange,preview:e.handlePreview}},[[e.isImageComp?n("div",[n("a-icon",{attrs:{type:"plus"}}),n("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1):0==e.fileList.length||e.buttonVisible?n("a-button",[n("a-icon",{attrs:{type:"upload"}}),e._v(e._s(e.text)+"\n      ")],1):e._e()]],2),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},i=[],o=n("2b0e"),s=n("9fb0"),l=n("0fea"),r="all",u="image",d="local",c="qiniu",p="oss",h="cos",f=function(){return"-"+parseInt(1e4*Math.random()+1,10)},m=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var a=e.join("");return a=a.replace(/-/g,""),a},g=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},v={name:"JUpload",data:function(){return{urlDownload:"",downloadUrl:{local:window._CONFIG["domianURL"]+"/sys/common/static/",qiniu:window._CONFIG["qn_base"]},uploadAction:{local:window._CONFIG["domianURL"]+"/sys/common/upload",qiniu:"//upload-"+window._CONFIG["qn_area"]+".qiniup.com",oss:"",cos:""},tokenAction:{qiniu:"/common/qiniu/getToken"},headers:{},fileList:[],uploadToken:"",uploadKey:"",newFileList:[],uploadGoOn:!0,previewVisible:!1,previewImage:"",containerId:"",top:"",left:"",moveDisplay:"none",showMoverTask:!1,moverHold:!1,currentImg:""}},props:{text:{type:String,required:!1,default:"点击上传"},fileType:{type:String,required:!1,default:r},uploadPath:{type:String,require:!1,default:""},fileName:{type:String,require:!1},maxFileSize:{type:Number,required:!1,default:1e3},uploadTarget:{type:String,required:!1,default:window._CONFIG["defaultUploadType"]||d},bizPath:{type:String,required:!1,default:"temp"},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1},returnUrl:{type:Boolean,required:!1,default:!0},number:{type:Number,required:!1,default:0},autoDelete:{type:Boolean,required:!1,default:!0},buttonVisible:{type:Boolean,required:!1,default:!0}},watch:{value:{immediate:!0,handler:function(){var e=this.value;e instanceof Array?this.returnUrl?this.initFileList(e.join(",")):this.initFileListArr(e):this.initFileList(e)}}},computed:{isImageComp:function(){return this.fileType===u},complistType:function(){return this.fileType===u?"picture-card":"text"}},created:function(){var e=o["default"].ls.get(s["a"]);this.headers={"X-Access-Token":e},this.containerId="container-ty-"+(new Date).getTime()},methods:{getUploadAction:function(){switch(this.uploadTarget){case d:return this.uploadAction.local;case c:return this.uploadAction.qiniu;case p:return this.uploadAction.oss;case h:return this.uploadAction.cos;default:return this.uploadAction.local}},getDownloadUrl:function(e){switch(this.uploadTarget){case d:return this.downloadUrl.local+e;case c:return this.downloadUrl.qiniu+e;case p:return this.downloadUrl.oss+e;case h:return this.downloadUrl.cos+e;default:return this.uploadAction.local+e}},getUploadData:function(e){switch(this.uploadTarget){case d:return{isup:1,bizPath:this.bizPath};case c:return{token:this.uploadToken,key:this.uploadKey};case p:return{};case h:return{};default:return{isup:1,bizPath:this.bizPath}}},getQiniuToken:function(){var e=this;return new Promise((function(t,n){Object(l["c"])(e.tokenAction.qiniu,{}).then((function(a){if(a.success)return e.uploadToken=a.result,void t();e.$message.error(a.message),n()}))}))},getFileFullName:function(e){return this.uploadPath+(this.fileName?this.fileName:m())+"."+e},saveToDB:function(e,t,n,a){var i=this;return Object(l["k"])("/system/sysFile/add",{fileName:e,filePath:t,fileLocation:n,fileTag:a}).then((function(e){e.success&&i.$emit("saved",e.result)}))},delFromBD:function(e){return Object(l["a"])("/system/sysFile/deleteByPath",{filePath:e})},initFileListArr:function(e){if(e&&0!=e.length){for(var t=[],n=0;n<e.length;n++){var a=getDownloadUrl(e[n].filePath);t.push({uid:f(),name:e[n].fileName,status:"done",url:a,response:{status:"history",message:e[n].filePath}})}this.fileList=t}else this.fileList=[]},initFileList:function(e){if(e&&0!=e.length){for(var t=[],n=e.split(","),a=0;a<n.length;a++){var i=this.getDownloadUrl(n[a]);t.push({uid:f(),name:g(n[a]),status:"done",url:i,response:{status:"history",message:n[a]}})}this.fileList=t}else this.fileList=[]},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");for(var n=[],a=0;a<e.length;a++){if("done"!==e[a].status)return;n.push(e[a].response.message)}n.length>0&&(t=n.join(",")),this.$emit("change",t)},beforeUpload:function(e){this.uploadGoOn=!0;var t=e.type;if(this.fileType===u&&t.indexOf("image")<0)return this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1;if(e.size>1024*this.maxFileSize*1024)return this.$message.warning("文件超过"+this.maxFileSize+"MB"),!1;var n=e.name.split(".");switch(n=n.length>1?n.pop():"",this.uploadKey=this.getFileFullName(n),this.$emit("selected",this.uploadKey,e),this.uploadTarget){case c:return this.getQiniuToken();default:return!0}},handleChange:function(e){var t=this;e.file.status||!1!==this.uploadGoOn||e.fileList.pop();var n=e.fileList;if(this.number>0&&n.length>this.number&&(this.handleDelete(n[0]),n=n.slice(-this.number)),"done"===e.file.status){switch(this.uploadTarget){case d:e.file.response.success&&(n=n.map((function(e){return e.response&&e.response.message&&(e.url=t.getDownloadUrl(e.response.message),t.saveToDB(e.name,e.response.message,1,"后台上传")),e})));case c:e.file.response.key&&(n=n.map((function(e){return e.response&&e.response.key&&(e.response.message=e.response.key,e.url=t.getDownloadUrl(e.response.key),t.saveToDB(e.name,e.response.key,2,"后台上传")),e})))}this.$message.success("".concat(e.file.name," 上传成功!"))}else"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file);if(this.fileList=n,"done"===e.file.status||"removed"===e.file.status)if(this.returnUrl)this.handlePathChange();else{this.newFileList=[];for(var a=0;a<n.length;a++){if("done"!==n[a].status)return;var i={fileName:n[a].name,filePath:n[a].response.message,fileSize:n[a].size};this.newFileList.push(i)}this.$emit("change",this.newFileList)}},handleDelete:function(e){this.autoDelete&&this.delFromBD(e.response.message),this.$emit("delete",e.response.message)},handlePreview:function(e){this.fileType===u?(this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0):location.href=e.url},handleCancel:function(){this.previewVisible=!1},moveLast:function(){var e=this.getIndexByUrl();if(0==e)this.$message.warn("未知的操作");else{for(var t=this.fileList[e].url,n=this.fileList[e-1].url,a=[],i=0;i<this.fileList.length;i++)i==e-1?a.push(t):i==e?a.push(n):a.push(this.fileList[i].url);this.currentImg=n,this.$emit("change",a.join(","))}},moveNext:function(){var e=this.getIndexByUrl();if(e==this.fileList.length-1)this.$message.warn("已到最后~");else{for(var t=this.fileList[e].url,n=this.fileList[e+1].url,a=[],i=0;i<this.fileList.length;i++)i==e+1?a.push(t):i==e?a.push(n):a.push(this.fileList[i].url);this.currentImg=n,this.$emit("change",a.join(","))}},getIndexByUrl:function(){for(var e=0;e<this.fileList.length;e++)if(this.fileList[e].url===this.currentImg||encodeURI(this.fileList[e].url)===this.currentImg)return e;return-1}},mounted:function(){var e=this,t=document.getElementById(this.containerId+"-mover");t.addEventListener("mouseover",(function(){e.moverHold=!0,e.moveDisplay="block"})),t.addEventListener("mouseout",(function(){e.moverHold=!1,e.moveDisplay="none"}));var n=document.getElementById(this.containerId)?document.getElementById(this.containerId).getElementsByClassName("ant-upload-list-picture-card"):[];n&&n.length>0&&(n[0].addEventListener("mouseover",(function(t){t=t||window.event;var n=t.target||t.srcElement;if("ant-upload-list-item-info"==n.className){e.showMoverTask=!1;var a=n.parentElement;e.left=a.offsetLeft,e.top=a.offsetTop+a.offsetHeight-50,e.moveDisplay="block",e.currentImg=n.getElementsByTagName("img")[0].src}})),n[0].addEventListener("mouseout",(function(t){t=t||window.event;var n=t.target||t.srcElement;"ant-upload-list-item-info"==n.className&&(e.showMoverTask=!0,setTimeout((function(){!1===e.moverHold&&(e.moveDisplay="none")}),100)),"ant-upload-list-item ant-upload-list-item-done"!=n.className&&"ant-upload-list ant-upload-list-picture-card"!=n.className||(e.moveDisplay="none")})))},model:{prop:"value",event:"change"}},y=v,b=(n("de21"),n("2877")),w=Object(b["a"])(y,a,i,!1,null,null,null);t["default"]=w.exports},de21:function(e,t,n){"use strict";n("7ab5")},e2e0:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l}));var i={normal:"normal",input:"input",inputNumber:"inputNumber",checkbox:"checkbox",select:"select",date:"date",datetime:"datetime",upload:"upload",file:"file",image:"image",popup:"popup",list_multi:"list_multi",sel_search:"sel_search",radio:"radio",checkbox_meta:"checkbox_meta",input_pop:"input_pop",slot:"slot",hidden:"hidden"},o=Symbol();function s(e,t){return new Promise((function(n){(function a(){var i=e.$refs[t];i?n(i):setTimeout((function(){a()}),10)})()}))}function l(e,t){if(!e||"function"!==typeof e.validateFields)throw"form 参数需要的是一个form对象，而传入的却是".concat(a(e));var n={};return new Promise((function(t,n){e.validateFields((function(e,a){e?n({error:o}):t(a)}))})).then((function(e){return Object.assign(n,{formValue:e}),r(t)})).then((function(e){return Object.assign(n,{tablesValue:e}),Promise.resolve(n)})).catch((function(e){return Promise.reject(e)}))}function r(e,t){if(!(e instanceof Array))throw"'validateTables'函数的'cases'参数需要的是一个数组，而传入的却是".concat(a(e));return new Promise((function(n,a){var i=[],s=0;e&&0!=e.length||n(),function l(){var r=e[s];r.getAll(!0,t).then((function(t){i[s]=t,++s===e.length?n(i):l()}),(function(e){e===o&&a({error:o,index:s}),a(e)}))}()}))}}}]);