(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35cf6444"],{"88bc":function(e,t,r){(function(t){var r=1/0,n=9007199254740991,a="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",l="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=s||c||Function("return this")();function u(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function h(e,t){var r=-1,n=e?e.length:0,a=Array(n);while(++r<n)a[r]=t(e[r],r,e);return a}function p(e,t){var r=-1,n=t.length,a=e.length;while(++r<n)e[a+r]=t[r];return e}var f=Object.prototype,m=f.hasOwnProperty,y=f.toString,v=d.Symbol,b=f.propertyIsEnumerable,g=v?v.isConcatSpreadable:void 0,w=Math.max;function k(e,t,r,n,a){var i=-1,o=e.length;r||(r=K),a||(a=[]);while(++i<o){var l=e[i];t>0&&r(l)?t>1?k(l,t-1,r,n,a):p(a,l):n||(a[a.length]=l)}return a}function C(e,t){return e=Object(e),x(e,t,(function(t,r){return r in e}))}function x(e,t,r){var n=-1,a=t.length,i={};while(++n<a){var o=t[n],l=e[o];r(l,o)&&(i[o]=l)}return i}function j(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var r=arguments,n=-1,a=w(r.length-t,0),i=Array(a);while(++n<a)i[n]=r[t+n];n=-1;var o=Array(t+1);while(++n<t)o[n]=r[n];return o[t]=i,u(e,this,o)}}function K(e){return D(e)||S(e)||!!(g&&e&&e[g])}function O(e){if("string"==typeof e||R(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function S(e){return I(e)&&m.call(e,"callee")&&(!b.call(e,"callee")||y.call(e)==a)}var D=Array.isArray;function N(e){return null!=e&&_(e.length)&&!A(e)}function I(e){return L(e)&&N(e)}function A(e){var t=E(e)?y.call(e):"";return t==i||t==o}function _(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function E(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function L(e){return!!e&&"object"==typeof e}function R(e){return"symbol"==typeof e||L(e)&&y.call(e)==l}var T=j((function(e,t){return null==e?{}:C(e,h(k(t,1),O))}));e.exports=T}).call(this,r("c8ba"))},9884:function(e,t,r){"use strict";r("9dfd")},"9dfd":function(e,t,r){},b0cd:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:"选择部门",width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[r("a-spin",{attrs:{tip:"Loading...",spinning:!1}},[r("a-input-search",{staticStyle:{"margin-bottom":"1px"},attrs:{placeholder:"请输入部门名称按回车进行搜索"},on:{search:e.onSearch}}),r("a-tree",{attrs:{checkable:"",treeData:e.treeData,checkStrictly:!0,autoExpandParent:e.autoExpandParent,expandedKeys:e.expandedKeys,checkedKeys:e.checkedKeys},on:{check:e.onCheck,select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(t){var n=t.title;return[n.indexOf(e.searchValue)>-1?r("span",[e._v("\n          "+e._s(n.substr(0,n.indexOf(e.searchValue)))+"\n          "),r("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n          "+e._s(n.substr(n.indexOf(e.searchValue)+e.searchValue.length))+"\n        ")]):r("span",[e._v(e._s(n))])]}}])})],1)],1)},a=[],i=r("4ec3");function o(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function l(e){return u(e)||d(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p={name:"JSelectDepartModal",props:["modalWidth","multi","rootOpened","departId"],data:function(){return{visible:!1,confirmLoading:!1,treeData:[],autoExpandParent:!0,expandedKeys:[],dataList:[],checkedKeys:[],checkedRows:[],searchValue:""}},created:function(){this.loadDepart()},watch:{departId:function(){this.initDepartComponent()},visible:{handler:function(){this.departId?this.checkedKeys=this.departId.split(","):this.checkedKeys=[]}}},methods:{show:function(){this.visible=!0,this.checkedRows=[],this.checkedKeys=[]},loadDepart:function(){var e=this;Object(i["G"])().then((function(t){if(t.success){var r=l(t.result);e.reWriterWithSlot(r),e.treeData=r,e.initDepartComponent(),e.rootOpened&&e.initExpandedKeys(t.result)}}))},initDepartComponent:function(){var e="";if(this.departId){var t,r=this.departId,n=o(this.dataList);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.indexOf(a.key)>=0&&(e+=","+a.title)}}catch(i){n.e(i)}finally{n.f()}e&&(e=e.substring(1))}this.$emit("initComp",e)},reWriterWithSlot:function(e){var t,r=o(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.children&&n.children.length>0){this.reWriterWithSlot(n.children);var a=Object.assign({},n);a.children={},this.dataList.push(a)}else this.dataList.push(n),n.scopedSlots={title:"title"}}}catch(i){r.e(i)}finally{r.f()}},initExpandedKeys:function(e){if(e&&e.length>0){var t,r=[],n=o(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.children&&a.children.length>0&&r.push(a.id)}}catch(i){n.e(i)}finally{n.f()}this.expandedKeys=[].concat(r)}else this.expandedKeys=[]},onCheck:function(e,t){var r=this;if(this.multi)this.checkedKeys=e.checked,this.checkedRows=this.getCheckedRows(this.checkedKeys);else{var n=e.checked.filter((function(e){return r.checkedKeys.indexOf(e)<0}));this.checkedKeys=l(n),this.checkedRows=0===this.checkedKeys.length?[]:[t.node.dataRef]}},onSelect:function(e,t){var r=[];if(r.push(e[0]),this.checkedKeys&&0!==this.checkedKeys.length&&this.multi){var n,a=t.node.dataRef.key;if(this.checkedKeys.indexOf(a)>=0)this.checkedKeys=this.checkedKeys.filter((function(e){return e!==a}));else(n=this.checkedKeys).push.apply(n,r)}else this.checkedKeys=[].concat(r),this.checkedRows=[t.node.dataRef];this.checkedRows=this.getCheckedRows(this.checkedKeys)},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSubmit:function(){this.checkedKeys&&0!=this.checkedKeys.length?this.$emit("ok",this.checkedRows,this.checkedKeys.join(",")):this.$emit("ok",""),this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},getParentKey:function(e,t){for(var r,n=0;n<t.length;n++){var a=t[n];a.children&&(a.children.some((function(t){return t.key===e}))?r=a.key:this.getParentKey(e,a.children)&&(r=this.getParentKey(e,a.children)))}return r},onSearch:function(e){var t=this,r=this.dataList.map((function(r){return r.title.indexOf(e)>-1?t.getParentKey(r.key,t.treeData):null})).filter((function(e,t,r){return e&&r.indexOf(e)===t}));Object.assign(this,{expandedKeys:r,searchValue:e,autoExpandParent:!0})},getCheckedRows:function(e){var t,r=function e(t,r){var n,a=o(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id===r)return i;if(i.children instanceof Array){var l=e(i.children,r);if(null!=l)return l}}}catch(s){a.e(s)}finally{a.f()}return null},n=[],a=o(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,l=r(this.treeData,i);null!=l&&n.push(l)}}catch(s){a.e(s)}finally{a.f()}return n}}},f=p,m=r("2877"),y=Object(m["a"])(f,n,a,!1,null,"4907a211",null);t["default"]=y.exports},eb4c:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[r("a-spin",{attrs:{spinning:e.confirmLoading}},[r("a-form",{attrs:{form:e.form}},[r("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"请选择状态!"}]}],expression:"['status',{rules: [{required: true, message: '请选择状态!'}]}]"}],attrs:{type:"radio","trigger-change":!0,dictCode:"additional_work_status",placeholder:"请选择状态"}})],1),r("a-form-item",{attrs:{label:"作业类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["codeType"],expression:"['codeType']"}],attrs:{type:"list","trigger-change":!0,dictCode:"work_type",placeholder:"请选择作业类型"}})],1),r("a-form-item",{attrs:{label:"作业名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["workName",{rules:[{required:!0,message:"请输入作业名!"}]}],expression:"['workName',{rules: [{required: true, message: '请输入作业名!'}]}]"}],attrs:{placeholder:"请输入作业名"}})],1),r("a-form-item",{attrs:{label:"作业描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["workDesc"],expression:"['workDesc']"}],attrs:{rows:"4",placeholder:"请输入作业描述"}})],1),r("a-form-item",{attrs:{label:"作业封面",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("j-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["workCover"],expression:"['workCover']"}],attrs:{uploadTarget:"qiniu",number:1,fileType:"image","trigger-change":!0}})],1),r("a-form-item",{attrs:{label:"作业资料",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("j-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["workDocumentUrl"],expression:"['workDocumentUrl']"}],attrs:{uploadTarget:"qiniu",number:1,"trigger-change":!0}})],1),r("a-form-item",{attrs:{label:"作业文件",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("j-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["workUrl"],expression:"['workUrl']"}],attrs:{uploadTarget:"qiniu",number:1,"trigger-change":!0}})],1),r("a-form-item",{attrs:{label:"分配班级",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("j-select-depart",{directives:[{name:"decorator",rawName:"v-decorator",value:["workDept",{rules:[{required:!0,message:"请选择班级!"}]}],expression:"['workDept',{rules: [{required: true, message: '请选择班级!'}]}]"}],attrs:{onlyLeaf:!0,onlyCategory:3,rootOpened:!0,multi:!0}})],1)],1)],1)],1)},a=[],i=r("0fea"),o=r("88bc"),l=r.n(o),s=(r("ca00"),r("cf74")),c=r("fe54"),d={name:"TeachingAdditionalWorkModal",components:{JUpload:s["default"],JSelectDepart:c["default"]},data:function(){return{form:this.$form.createForm(this),title:"操作",width:800,visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{},url:{add:"/teaching/teachingAdditionalWork/add",edit:"/teaching/teachingAdditionalWork/edit"}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(l()(t.model,"codeType","createTime","workName","workDesc","workCover","workDocumentUrl","workUrl","workDept","status"))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(r,n){if(!r){t.confirmLoading=!0;var a="",o="";e.model.id?(a+=e.url.edit,o="put"):(a+=e.url.add,o="post");var l=Object.assign(e.model,n);Object(i["j"])(a,l,o).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()},popupCallback:function(e){this.form.setFieldsValue(l()(e,"codeType","createTime","workName","workDesc","workCover","workDocumentUrl","workUrl","workDept","workIntegral","status"))}}},u=d,h=r("2877"),p=Object(h["a"])(u,n,a,!1,null,null,null);t["default"]=p.exports},fe54:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"components-input-demo-presuffix"},[r("a-input",{attrs:{placeholder:"请点击选择部门",readOnly:"",disabled:e.disabled},on:{click:e.openModal},model:{value:e.departNames,callback:function(t){e.departNames=t},expression:"departNames"}},[r("a-icon",{attrs:{slot:"prefix",type:"cluster",title:"部门选择控件"},slot:"prefix"}),e.departIds?r("a-icon",{attrs:{slot:"suffix",type:"close-circle",title:"清空"},on:{click:e.handleEmpty},slot:"suffix"}):e._e()],1),r("j-select-depart-modal",{ref:"innerDepartSelectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,rootOpened:e.rootOpened,"depart-id":e.departIds},on:{ok:e.handleOK,initComp:e.initComp}})],1)},a=[],i=r("b0cd"),o={name:"JSelectDepart",components:{JSelectDepartModal:i["default"]},props:{modalWidth:{type:Number,default:500,required:!1},multi:{type:Boolean,default:!1,required:!1},rootOpened:{type:Boolean,default:!0,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},customReturnField:{type:String,default:"id"}},data:function(){return{visible:!1,confirmLoading:!1,departNames:"",departIds:""}},mounted:function(){this.departIds=this.value},watch:{value:function(e){"id"===this.customReturnField&&(this.departIds=e)}},methods:{initComp:function(e){this.departNames=e},openModal:function(){this.$refs.innerDepartSelectModal.show()},handleOK:function(e,t){var r=this,n="";!e&&e.length<=0?(this.departNames="",this.departIds=""):(n=e.map((function(e){return e[r.customReturnField]})).join(","),this.departNames=e.map((function(e){return e["departName"]})).join(","),this.departIds=t),this.$emit("change",n)},getDepartNames:function(){return this.departNames},handleEmpty:function(){this.handleOK("")}},model:{prop:"value",event:"change"}},l=o,s=(r("9884"),r("2877")),c=Object(s["a"])(l,n,a,!1,null,"4d448922",null);t["default"]=c.exports}}]);