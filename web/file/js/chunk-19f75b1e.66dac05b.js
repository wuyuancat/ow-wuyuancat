(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19f75b1e","chunk-0bf476c4","chunk-6a60b4ac","chunk-89e59de4"],{"1fd8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer",domProps:{innerHTML:t._s(t.$store.getters.sysConfig.footer)}})},o=[]},"216f":function(t,e){},3323:function(t,e,n){},"43ee":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("router-link",{attrs:{to:{path:"/home"}}},[n("img",{staticClass:"logo",attrs:{src:t.logo,alt:""}})]),n("t-menu",{staticClass:"menu",attrs:{mode:"horizontal",menu:t.menus}})],1)},o=[],a=n("2638"),s=n.n(a),c=n("55f1"),i=n("0c63");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=c["a"].Item,p=c["a"].SubMenu,h={name:"TMenu",props:{menu:{type:Array,required:!0},theme:{type:String,required:!1,default:"light"},mode:{type:String,required:!1,default:"inline"},collapsed:{type:Boolean,required:!1,default:!1}},data:function(){return{openKeys:[],selectedKeys:[],cachedOpenKeys:[],isLogin:!1}},computed:{rootSubmenuKeys:function(t){var e=[];return t.menu.forEach((function(t){return e.push(t.path)})),e}},created:function(){this.isLogin=null!=this.$store.getters.userInfo},mounted:function(){},watch:{collapsed:function(t){t?(this.cachedOpenKeys=this.openKeys.concat(),this.openKeys=[]):this.openKeys=this.cachedOpenKeys},$route:function(){}},methods:{onOpenChange:function(t){var e=this;if("horizontal"!==this.mode){var n=t.find((function(t){return!e.openKeys.includes(t)}));this.rootSubmenuKeys.includes(n)?this.openKeys=n?[n]:[]:this.openKeys=t}else this.openKeys=t},renderItem:function(t){return t.hidden?null:t.children?this.renderSubMenu(t):this.renderMenuItem(t)},renderMenuItem:function(t){var e=this.$createElement,n=t.route&&!t.internalOrExternal?"router-link":"a",r=t.internalOrExternal?"_blank":"_self",o={to:{path:t.url}},a={href:t.url,target:r};if(!t.needLogin||this.isLogin)return e(d,s()([{},{key:t.url}]),[e(n,{props:f({},o),attrs:f({},a)},[this.renderIcon(t.icon),e("span",[t.title])])])},renderSubMenu:function(t){var e=this,n=this.$createElement,r=t.route&&!t.internalOrExternal?"router-link":"a",o={to:{path:t.url}},a=t.internalOrExternal?"_blank":"_self",c={href:t.url,target:a},i=[];return t.children.forEach((function(t){return i.push(e.renderItem(t))})),n(p,s()([{},{key:t.url}]),[n(r,{slot:"title",props:f({},o),attrs:f({},c)},[this.renderIcon(t.icon),n("span",[t.title])]),i])},renderIcon:function(t){var e=this.$createElement;if("none"===t||void 0===t)return null;var n={};return"object"===u(t)?n.component=t:n.type=t,e(i["a"],{props:f({},n)})}},render:function(){var t=this,e=arguments[0],n=this.mode,r=this.theme,o=this.menu,a={mode:n,theme:r,openKeys:this.openKeys,overflowedIndicator:e("a-icon",{style:"color:white",attrs:{type:"menu"}})},s={select:function(e){t.selectedKeys=e.selectedKeys,t.$emit("select",e)},openChange:this.onOpenChange},i=o.map((function(e){return e.hidden?null:t.renderItem(e)}));return e(c["a"],{props:f({},a),on:f({},s),model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e}}},[i])}},y={components:{TMenu:h},data:function(){return{menus:[],logo:"/logo.png"}},created:function(){this.menus=this.$store.getters.menuList,this.$store.getters.sysConfig.logo&&this.$store.getters.sysConfig.qiniuDomain&&(this.logo=this.$store.getters.sysConfig.qiniuDomain+"/"+this.$store.getters.sysConfig.logo)}},b=y,g=(n("629a"),n("2877")),v=Object(g["a"])(b,r,o,!1,null,"258aec68",null);e["default"]=v.exports},"50db":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-enter"},[t.token?n("div",[n("a-avatar",{staticClass:"avatar",attrs:{shape:"square",size:100,src:t.getFileAccessHttpUrl(t.avatar())}}),n("h3",[t._v("欢迎您，"+t._s(t.nickname()))]),n("a-button",{attrs:{type:"dashed"},on:{click:t.enter}},[t._v("进入系统")])],1):n("div",[n("a-avatar",{staticClass:"avatar",attrs:{shape:"square",size:100,src:"/logo.png"}}),n("h3",[t._v("欢迎来到"+t._s(t.brandName))]),n("a-button",{attrs:{type:"dashed"},on:{click:t.enter}},[t._v("登录/注册")])],1)])},o=[],a=n("2b0e"),s=n("2f62"),c=n("9fb0");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={data:function(){return{brandName:this.$store.getters.sysConfig.brandName,token:""}},created:function(){this.token=a["default"].ls.get(c["a"])},methods:u(u({},Object(s["c"])(["nickname","avatar","userInfo"])),{},{getFileAccessHttpUrl:getFileAccessHttpUrl,enter:function(){this.$router.push("/account/center")}})},m=f,d=(n("aecb"),n("2877")),p=Object(d["a"])(m,r,o,!1,null,"a9830302",null);e["default"]=p.exports},"61fc4":function(t,e,n){"use strict";n("ed45")},"629a":function(t,e,n){"use strict";n("d81a")},7448:function(t,e,n){"use strict";n("ab0f")},"7dfb":function(t,e,n){"use strict";n.r(e);var r=n("216f"),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=o.a},"84ee":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("a-layout",[n("a-layout-header",[n("Header")],1),n("a-layout",[n("a-layout-content",[n("div",{staticClass:"project-detail"},[n("div",{staticClass:"scratch-player"},[n("iframe",{attrs:{src:t.workInfo.workFile?"/scratch3/player.html?workUrl="+t.workInfo.workFileKey_url:"about:blank",id:"player",frameborder:"0",width:"100%",height:"100%",scrolling:"no"}})]),n("div",{staticClass:"project-info"},[n("a-row",{attrs:{type:"flex",justify:"space-around"}},[n("a-col",{attrs:{span:4}},[n("a-avatar",{staticClass:"avatar",attrs:{shape:"square",size:60,src:t.workInfo.avatar_url}}),n("p",[t._v(t._s(t.workInfo.realname||t.workInfo.username))])],1),n("a-col",{attrs:{span:14}},[n("div",{staticClass:"project-meta"},[n("h2",{staticClass:"title"},[t._v(t._s(t.workInfo.workName))]),n("p",{staticClass:"time"},[t._v(t._s(t.workInfo.createTime))])])]),n("a-col",{attrs:{span:6}},[n("div",{staticClass:"project-op"},[n("a-icon",{attrs:{type:"eye",theme:"twoTone"}}),n("span",{staticClass:"gap"},[t._v(t._s(t.workInfo.viewNum))]),n("a-icon",{attrs:{type:"like",theme:"twoTone"},on:{click:t.starWork}}),n("span",{staticClass:"gap"},[t._v(t._s(t.workInfo.starNum))]),n("a-popover",{attrs:{title:"微信扫一扫手机体验和分享"}},[n("template",{slot:"content"},[n("qrcode",{attrs:{value:t.getShareUrl(),size:200,level:"H"}})],1),n("a-icon",{attrs:{type:"mobile",theme:"twoTone"}})],2)],1)])],1)],1),n("div",{staticClass:"project-comment"},[n("div",{staticClass:"publish"},[n("a-row",{attrs:{type:"flex",justify:"space-between"}},[n("a-col",{staticClass:"comment-user",attrs:{span:"3"}},[n("a-avatar",{attrs:{shape:"square",size:60,icon:"user",src:t.getFileAccessHttpUrl(t.avatar())}}),n("p",[t._v("\n                    "+t._s(t.token?t.nickname():"未登录")+"\n                  ")])],1),n("a-col",{attrs:{span:16}},[n("a-textarea",{attrs:{rows:5,maxLength:500,placeholder:"说说这个作品怎么样吧"},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}})],1),n("a-col",{attrs:{span:4}},[n("div",{staticClass:"comment-btn"},[n("a-button",{attrs:{disabled:!t.token,type:"dashed"},on:{click:t.comment}},[t._v("发表评论")])],1)])],1)],1),n("a-divider"),n("a-list",{staticClass:"comment-list",attrs:{"item-layout":"horizontal",locale:{emptyText:"暂无评论"},"data-source":t.comments},scopedSlots:t._u([{key:"renderItem",fn:function(e){return n("a-list-item",{},[n("a-comment",{attrs:{author:e.realname||e.username}},[n("a-avatar",{attrs:{slot:"avatar",shape:"square",size:40,icon:"user",src:e.avatar_url},slot:"avatar"}),n("p",{staticClass:"comment-content",attrs:{slot:"content"},slot:"content"},[t._v("\n                    "+t._s(e.comment)+"\n                  ")]),n("a-tooltip",{attrs:{slot:"datetime",title:t.moment(e.createTime).format("YYYY-MM-DD HH:mm:ss")},slot:"datetime"},[n("span",[t._v(t._s(t.moment(e.createTime).fromNow()))])])],1)],1)}}])},[t.showLoadingMore?n("div",{style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"},attrs:{slot:"loadMore"},slot:"loadMore"},[t.loadingMore?n("a-spin"):n("a-button",{attrs:{type:"link"},on:{click:t.workComments}},[t._v(" 加载更多 ")])],1):t._e()])],1)])]),n("a-layout-sider",[n("UserEnter")],1)],1),n("a-layout-footer",[n("Footer")],1)],1)],1)},o=[],a=n("2b0e"),s=n("0fea"),c=n("2f62"),i=n("9fb0"),u=n("151f"),l=n("43ee"),f=n("e33f"),m=n("50db"),d=n("c1df"),p=n.n(d);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={name:"WorkDetail",components:{qrcode:u["default"],Header:l["default"],Footer:f["default"],UserEnter:m["default"]},data:function(){return{workId:"",workInfo:{},token:"",commentContent:"",showLoadingMore:!0,loadingMore:!1,commentsPage:0,comments:[]}},created:function(){this.workId=this.$route.query.id,this.getWorkInfo(this.workId),this.token=a["default"].ls.get(i["a"])},mounted:function(){document.addEventListener("scratchFullScreen",(function(t){window.launchIntoFullscreen(document.getElementById("player"))})),document.addEventListener("scratchUnFullScreen",(function(t){window.exitFullscreen()})),document.addEventListener("scratchInit",(function(t){var e=document.getElementById("player"),n=e.contentDocument.getElementById("scratch");n.addEventListener("click",(function(){e.focus()}))}))},methods:y(y({},Object(c["c"])(["nickname","avatar","userInfo"])),{},{moment:p.a,getFileAccessHttpUrl:s["d"],getWorkInfo:function(t){var e=this;Object(s["c"])("/teaching/teachingWork/studentWorkInfo?workId="+t).then((function(t){t.success?(e.workInfo=t.result,e.workComments()):e.$message.error("作品获取失败")}))},starWork:function(){var t=this;Object(s["c"])("/teaching/teachingWork/starWork?workId="+this.workId).then((function(e){e.success&&("点赞成功"==e.message&&(t.workInfo.starNum+=1),t.$message.success(e.message))}))},workComments:function(){var t=this;this.commentsPage+=1,this.loadingMore=!0,Object(s["c"])("/teaching/teachingWork/getWorkComments",{workId:this.workId,page:this.commentsPage}).then((function(e){t.loadingMore=!1,0==e.result.length&&t.commentsPage>1?t.$message.info("已加载完啦！"):t.comments=t.comments.concat(e.result)}))},comment:function(){var t=this;""!=this.commentContent&&Object(s["k"])("/teaching/teachingWork/saveComment",{workId:this.workId,comment:this.commentContent}).then((function(e){e.success&&(t.comments.unshift({comment:t.commentContent,realname:t.nickname(),avatar_url:t.getFileAccessHttpUrl(t.avatar()),createTime:new Date}),t.commentContent="",t.$message.success(e.message))}))},getShareUrl:function(){return window.location.protocol+"//"+window.location.host+"/scratch3/scratch-mobile?workId="+this.workId},enter:function(){this.$router.push("/account/center")}})},v=g,k=(n("61fc4"),n("2877")),w=Object(k["a"])(v,r,o,!1,null,"85136eac",null);e["default"]=w.exports},ab0f:function(t,e,n){},aecb:function(t,e,n){"use strict";n("3323")},d81a:function(t,e,n){},e33f:function(t,e,n){"use strict";n.r(e);var r=n("1fd8"),o=n("7dfb");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("7448");var s=n("2877"),c=Object(s["a"])(o["default"],r["a"],r["b"],!1,null,"0c1c0f77",null);e["default"]=c.exports},ed45:function(t,e,n){}}]);